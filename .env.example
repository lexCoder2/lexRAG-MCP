# ─────────────────────────────────────────────────────────────────────────────
# lexRAG MCP Server – Environment Variables
# Copy this file to .env and adjust values for your setup.
# ─────────────────────────────────────────────────────────────────────────────

# ── Workspace / Project ───────────────────────────────────────────────────────

# Absolute path to the target workspace being indexed.
# Falls back to process.cwd() when unset.
# Used in: tool-handlers.ts, graph/builder.ts, graph/docs-builder.ts,
#          graph/orchestrator.ts, parsers/typescript-parser.ts
LEXRAG_WORKSPACE_ROOT=

# Source sub-directory inside the workspace to index (absolute or relative).
# Default: <WORKSPACE_ROOT>/src
# Used in: tool-handlers.ts
GRAPH_SOURCE_DIR=

# Logical project identifier (used as a namespace in the graph).
# Default: basename of LEXRAG_WORKSPACE_ROOT
# Used in: tool-handlers.ts, graph/builder.ts, graph/docs-builder.ts,
#          graph/orchestrator.ts
LEXRAG_PROJECT_ID=

# Transaction ID for graph write operations.
# Default: tx-<timestamp>
# Used in: graph/builder.ts, graph/docs-builder.ts
LEXRAG_TX_ID=

# ── MCP Transport ─────────────────────────────────────────────────────────────

# Transport mode for the MCP server: "stdio" (default) or "http".
# Used in: server.ts, mcp-server.ts, tool-handlers.ts
MCP_TRANSPORT=stdio

# HTTP port when MCP_TRANSPORT=http.
# Default: 9000
# Used in: server.ts
MCP_PORT=9000

# Display name reported by the MCP server.
# Used in: server.ts, mcp-server.ts, index.ts
LEXRAG_SERVER_NAME=lexRAG MCP

# ── Memgraph (graph database) ─────────────────────────────────────────────────

# Hostname of the Memgraph instance.
# Default: localhost
# Used in: server.ts, mcp-server.ts, index.ts, cli/build.ts, cli/query.ts
MEMGRAPH_HOST=localhost

# Bolt port of the Memgraph instance.
# Default: 7687
# Used in: server.ts, mcp-server.ts, index.ts, cli/build.ts, cli/query.ts
MEMGRAPH_PORT=7687

# ── Qdrant (vector store) ─────────────────────────────────────────────────────

# Hostname of the Qdrant instance.
# Default: localhost
# Used in: tool-handlers.ts
QDRANT_HOST=localhost

# REST/gRPC port of the Qdrant instance.
# Default: 6333
# Used in: tool-handlers.ts
QDRANT_PORT=6333

# ── Code Summarizer ───────────────────────────────────────────────────────────

# URL of the optional LLM summarizer service (e.g. http://localhost:8080).
# When unset, summarization is disabled and heuristic summaries are used.
# Used in: tool-handlers.ts, graph/orchestrator.ts
LEXRAG_SUMMARIZER_URL=

# ── Agent / Coordination ──────────────────────────────────────────────────────

# Identifier for the current agent instance used in coordination claims.
# Default: agent-local
# Used in: tool-handlers.ts
LEXRAG_AGENT_ID=agent-local

# ── Parser ────────────────────────────────────────────────────────────────────

# Set to "true" to use the Tree-sitter parser instead of the regex parser.
# Default: false
# Used in: graph/orchestrator.ts
LEXRAG_USE_TREE_SITTER=false

# ── File Watcher ──────────────────────────────────────────────────────────────

# Set to "true" to enable incremental file-change watching.
# Automatically enabled when MCP_TRANSPORT=http.
# Used in: tool-handlers.ts
LEXRAG_ENABLE_WATCHER=false

# Comma-separated glob patterns to exclude from indexing/watching.
# Example: node_modules/**,dist/**,**/*.test.ts
# Used in: tool-handlers.ts
LEXRAG_IGNORE_PATTERNS=

# ── Path Fallback ─────────────────────────────────────────────────────────────

# Set to "true" to allow the server to fall back to the mounted workspace path
# when a requested path is not accessible (useful inside Docker containers).
# Used in: tool-handlers.ts
LEXRAG_ALLOW_RUNTIME_PATH_FALLBACK=false
